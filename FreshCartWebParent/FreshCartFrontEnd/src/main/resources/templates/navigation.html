<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">

<body>
	<div th:fragment="header_menu">
		<div class="bg-light py-1">
			<div class="container">
				<div class="row">
					<div class="col-auto">
						<a href="#" class="text-reset">Support</a>
						<a href="#" class="mx-md-8 ms-4 text-reset">Delivery</a>
						<a href="#" class="text-reset d-none d-md-inline">Warranty</a>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div th:fragment="search_nav">
		<div class="py-5">
			<div class="container">
				<div class="row w-100 align-items-center gx-lg-2 gx-0">
					<!-- Logo -->
					<div class="col-xxl-2 col-lg-3 col-md-6 col-5">
						<a class="navbar-brand d-none d-lg-block" th:href="@{/}">
							<img th:src="@{${S3_BASE_URI + SITE_LOGO}}" alt="FreshCart" />
						</a>
						<div class="d-flex justify-content-between w-100 d-lg-none">
							<a class="navbar-brand" th:href="@{/}">
								<img th:src="@{${S3_BASE_URI + SITE_LOGO}}" alt="FreshCart" />
							</a>
						</div>
					</div>

					<!-- Search bar -->
					<div class="col-xxl-5 col-lg-5 d-none d-lg-block">
						<form th:action="@{/search}" method="get">
							<div class="input-group">
								<input type="search" name="keyword" class="form-control rounded"
									   th:value="${searchKeyword}"
									   placeholder="Search for products" required />
								<span class="input-group-append">
									<button class="btn bg-white border border-start-0 ms-n10 rounded-0 rounded-end" type="submit">
										<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" 
											 stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" 
											 class="feather feather-search">
											<circle cx="11" cy="11" r="8"></circle>
											<line x1="21" y1="21" x2="16.65" y2="16.65"></line>
										</svg>
									</button>
								</span>
							</div>
						</form>
					</div>

					<!-- Spacer sau search bar -->
					<div class="col-xxl-2 col-lg-2 d-none d-lg-block"></div>

					<!-- Icons section -->
					<div class="col-lg-2 text-end">
						<div class="list-inline">
							<!-- User Account -->
							<div class="list-inline-item me-4">
								<th:block sec:authorize="!isAuthenticated()">
									<a th:href="@{/login}" class="text-muted">
										<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" 
											 stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" 
											 class="feather feather-user">
											<path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
											<circle cx="12" cy="7" r="4"></circle>
										</svg>
									</a>
								</th:block>
								<th:block sec:authorize="isAuthenticated()">
									<div class="nav-item dropdown">
										<a class="nav-link" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
											<div class="avatar-circle-sm">
												<span class="avatar-initials" 
													  th:with="name=${#authentication.principal.fullName}"
													  th:text="${#strings.length(name) >= 2 ? #strings.substring(name,0,2) : name}">
												</span>
											</div>
										</a>
										<ul class="dropdown-menu">
											<li><a class="dropdown-item" th:href="@{/account_details}">Account</a></li>
											<li><a class="dropdown-item" th:href="@{/orders}">Orders</a></li>
											<li><a class="dropdown-item" th:href="@{/address_book}">Address</a></li>
											<li><a class="dropdown-item" th:href="@{/reviews}">Reviews</a></li>
											<li><hr class="dropdown-divider"></li>
											<li><a class="dropdown-item text-danger" href="javascript: document.logoutForm.submit()">Logout</a></li>
										</ul>
									</div>
								</th:block>
							</div>

							<!-- Shopping Cart -->
							<div class="list-inline-item me-4">
								<a class="text-muted position-relative" th:href="@{/cart}">
									<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" 
										 stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" 
										 class="feather feather-shopping-bag">
										<path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path>
										<line x1="3" y1="6" x2="21" y2="6"></line>
										<path d="M16 10a4 4 0 0 1-8 0"></path>
									</svg>
									<span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-success" 
										  th:text="${#session.getAttribute('totalCartItems') != null ? #session.getAttribute('totalCartItems') : 0}">
									</span>
								</a>
							</div>

							<!-- Theme switcher -->
							<div class="list-inline-item">
								<a href="#" class="text-muted" id="themeSwitcher">
									<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" 
										 stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" 
										 class="feather feather-moon">
										<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
									</svg>
								</a>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<form th:action="@{/logout}" method="post" th:hidden="true" name="logoutForm">
			<input type="submit" value="Logout" />
		</form>
	</div>

	<div th:fragment="footer_menu">
		<footer class="footer">
			<!-- Main footer content -->
			<div class="container py-5">
				<div class="row justify-content-between">
					<!-- Brand Description - Left Side -->
					<div class="col-lg-3">
						<h2 class="h5 mb-3">FreshCart</h2>
						<p class="text-muted">With a wide selection of fresh produce, pantry staples, and household essentials, we've got everything you need just a click away.</p>
						<!-- Social Media Icons -->
						<div class="d-flex gap-3 mt-4 mb-4">
							<a href="#" class="text-dark"><i class="bi bi-instagram"></i></a>
							<a href="#" class="text-dark"><i class="bi bi-facebook"></i></a>
							<a href="#" class="text-dark"><i class="bi bi-telegram"></i></a>
							<a href="#" class="text-dark"><i class="bi bi-whatsapp"></i></a>
						</div>
					</div>

					<!-- Footer Links - Right Side -->
					<div class="col-lg-8">
						<div class="row">
							<!-- Categories Column -->
							<div class="col-md-3">
								<h5 class="mb-4">Sales</h5>
								<ul class="list-unstyled">
									<li class="mb-3"><a href="#" class="text-muted text-decoration-none">Weekly sale</a></li>
									<li class="mb-3"><a href="#" class="text-muted text-decoration-none">Special price</a></li>
									<li class="mb-3"><a href="#" class="text-muted text-decoration-none">Easter is coming</a></li>
									<li class="mb-3"><a href="#" class="text-muted text-decoration-none">Italian dinner</a></li>
									<li class="mb-3"><a href="#" class="text-muted text-decoration-none">Fresh fruits</a></li>
									<li class="mb-3"><a href="#" class="text-muted text-decoration-none">Exotic fruits</a></li>
								</ul>
							</div>

							<!-- Company Column -->
							<div class="col-md-3">
								<h5 class="mb-4">Company</h5>
								<ul class="list-unstyled">
									<li class="mb-3"><a href="#" class="text-muted text-decoration-none">Blog and news</a></li>
									<li class="mb-3"><a href="#" class="text-muted text-decoration-none">About us</a></li>
									<li class="mb-3"><a href="#" class="text-muted text-decoration-none">FAQ page</a></li>
									<li class="mb-3"><a href="#" class="text-muted text-decoration-none">Contact us</a></li>
									<li class="mb-3"><a href="#" class="text-muted text-decoration-none">Careers</a></li>
								</ul>
							</div>

							<!-- Account Column -->
							<div class="col-md-3">
								<h5 class="mb-4">Account</h5>
								<ul class="list-unstyled">
									<li class="mb-3"><a href="#" class="text-muted text-decoration-none">Your account</a></li>
									<li class="mb-3"><a href="#" class="text-muted text-decoration-none">Shipping & policies</a></li>
									<li class="mb-3"><a href="#" class="text-muted text-decoration-none">Refunds & replacements</a></li>
									<li class="mb-3"><a href="#" class="text-muted text-decoration-none">Order tracking</a></li>
									<li class="mb-3"><a href="#" class="text-muted text-decoration-none">Delivery info</a></li>
									<li class="mb-3"><a href="#" class="text-muted text-decoration-none">Taxes & fees</a></li>
								</ul>
							</div>

							<!-- Customer Service Column -->
							<div class="col-md-3">
								<h5 class="mb-4">Customer service</h5>
								<ul class="list-unstyled">
									<li class="mb-3"><a href="#" class="text-muted text-decoration-none">Payment methods</a></li>
									<li class="mb-3"><a href="#" class="text-muted text-decoration-none">Money back guarantee</a></li>
									<li class="mb-3"><a href="#" class="text-muted text-decoration-none">Refunds & replacements</a></li>
									<li class="mb-3"><a href="#" class="text-muted text-decoration-none">Order tracking</a></li>
									<li class="mb-3"><a href="#" class="text-muted text-decoration-none">Delivery info</a></li>
									<li class="mb-3"><a href="#" class="text-muted text-decoration-none">Shipping</a></li>
								</ul>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Payment Partners Section -->
			<div class="border-top py-4">
				<div class="container">
					<div class="row align-items-center">
						<div class="col-lg-5 text-lg-start text-center mb-2 mb-lg-0">
							<ul class="list-inline mb-0">
								<li class="list-inline-item text-dark">Payment Partners</li>
								<li class="list-inline-item">
									<a href="#!"><img th:src="@{/images/payment/amazonpay.svg}" alt=""></a>
								</li>
								<li class="list-inline-item">
									<a href="#!"><img th:src="@{/images/payment/american-express.svg}" alt=""></a>
								</li>
								<li class="list-inline-item">
									<a href="#!"><img th:src="@{/images/payment/mastercard.svg}" alt=""></a>
								</li>
								<li class="list-inline-item">
									<a href="#!"><img th:src="@{/images/payment/paypal.svg}" alt=""></a>
								</li>
								<li class="list-inline-item">
									<a href="#!"><img th:src="@{/images/payment/visa.svg}" alt=""></a>
								</li>
							</ul>
						</div>
						<div class="col-lg-7 mt-4 mt-md-0">
							<ul class="list-inline mb-0 text-lg-end text-center">
								<li class="list-inline-item mb-2 mb-md-0 text-dark">Get deliveries with FreshCart</li>
								<li class="list-inline-item ms-4">
									<a href="#!"> <img th:src="@{/images/appbutton/appstore-btn.svg}" alt="" style="width: 140px;"></a>
								</li>
								<li class="list-inline-item">
									<a href="#!"> <img th:src="@{/images/appbutton/googleplay-btn.svg}" alt="" style="width: 140px;"></a>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>

			<!-- Copyright Section -->
			<div class="border-top py-4">
				<div class="container">
					<div class="row align-items-center">
						<div class="col-md-6">
							<span class="small text-muted">[[${COPYRIGHT}]]</span>
						</div>
						<div class="col-md-6">
							<ul class="list-inline text-md-end mb-0 small mt-3 mt-md-0">
								<li class="list-inline-item text-muted">Follow us on</li>
								<li class="list-inline-item me-1">
									<a href="#!" class="btn btn-xs btn-social btn-icon">
										<i class="bi bi-facebook"></i>
									</a>
								</li>
								<li class="list-inline-item me-1">
									<a href="#!" class="btn btn-xs btn-social btn-icon">
										<i class="bi bi-twitter"></i>
									</a>
								</li>
								<li class="list-inline-item">
									<a href="#!" class="btn btn-xs btn-social btn-icon">
										<i class="bi bi-instagram"></i>
									</a>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</footer>
	</div>

</body>

</html>