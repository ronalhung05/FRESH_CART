<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragments :: page_head('Shopme', 'none')"/>

<body>
<div class="border-bottom">
    <div th:replace="navigation :: header_menu"></div>
    <div th:replace="navigation :: search_nav"></div>
    <nav class="navbar navbar-expand-lg navbar-light navbar-default p-0 p-sm-0 navbar-offcanvas-color">
        <div class="container">
            <!-- Toggler button for mobile -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarNav" aria-controls="navbarNav"
                    aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <!-- Navbar items -->
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav align-items-center">
                    <!-- All Categories Dropdown -->
                    <li class="nav-item dropdown mega-menu me-6 d-none d-lg-block">
                        <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                 class="bi bi-text-left me-2" viewBox="0 0 16 16">
                                <path fill-rule="evenodd"
                                      d="M2 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z">
                                </path>
                            </svg>
                            All Categories
                        </a>

                        <div class="dropdown-menu">
                            <div class="main-categories">
                                <th:block th:each="cat : ${listCategories}">
                                    <!-- Main category wrapper -->
                                    <div class="category-wrapper">
                                        <!-- Main category item -->
                                        <a class="dropdown-item" href="#"
                                           th:href="@{'/category/' + ${cat.alias}}"
                                           th:classappend="${cat.name == selectedMainCategory ? 'active' : ''}">
                                            <span th:text="${cat.name}"></span>
                                            <i th:if="${not #lists.isEmpty(cat.children)}" class="bi bi-chevron-right"></i>
                                        </a>

                                        <!-- Sub categories -->
                                        <div class="subcategory-group" th:if="${not #lists.isEmpty(cat.children)}">
                                            <th:block th:each="subCat : ${cat.children}">
                                                <!-- Sub category wrapper -->
                                                <div class="subcategory-wrapper">
                                                    <!-- Sub category item -->
                                                    <a class="dropdown-item" href="#"
                                                       th:href="@{'/category/' + ${subCat.alias}}"
                                                       th:classappend="${subCat.name == selectedSubCategory ? 'active' : ''}">
                                                        <span th:text="${subCat.name}"></span>
                                                        <i th:if="${not #lists.isEmpty(subCat.children)}" class="bi bi-chevron-right"></i>
                                                    </a>

                                                    <!-- Child categories -->
                                                    <div class="childcategory-group" th:if="${not #lists.isEmpty(subCat.children)}">
                                                        <th:block th:each="childCat : ${subCat.children}">
                                                            <a class="dropdown-item" href="#"
                                                               th:href="@{'/category/' + ${childCat.alias}}"
                                                               th:text="${childCat.name}">
                                                            </a>
                                                        </th:block>
                                                    </div>
                                                </div>
                                            </th:block>
                                        </div>
                                    </div>
                                </th:block>
                            </div>
                        </div>
                    </li>

                    <!-- Other nav items -->
                    <li class="nav-item">
                        <a class="nav-link" th:href="@{/promotion}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                 class="bi bi-percent me-2" viewBox="0 0 16 16">
                                <path d="M13.442 2.558a.625.625 0 0 1 0 .884l-10 10a.625.625 0 1 1-.884-.884l10-10a.625.625 0 0 1 .884 0zM4.5 6a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 1a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5zm7 6a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm0 1a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5z"/>
                            </svg>
                            Promotion
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" th:href="@{/best-sellers}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                 class="bi bi-star me-2" viewBox="0 0 16 16">
                                <path d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
                            </svg>
                            Best Sellers
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" th:href="@{/new-arrival}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                                 class="bi bi-box-seam me-2" viewBox="0 0 16 16">
                                <path d="M8.186 1.113a.5.5 0 0 0-.372 0L1.846 3.5l2.404.961L10.404 2l-2.218-.887zm3.564 1.426L5.596 5 8 5.961 14.154 3.5l-2.404-.961zm3.25 1.7-6.5 2.6v7.922l6.5-2.6V4.24zM7.5 14.762V6.838L1 4.239v7.923l6.5 2.6zM7.443.184a1.5 1.5 0 0 1 1.114 0l7.129 2.852A.5.5 0 0 1 16 3.5v8.662a1 1 0 0 1-.629.928l-7.185 2.874a.5.5 0 0 1-.372 0L.63 13.09a1 1 0 0 1-.63-.928V3.5a.5.5 0 0 1 .314-.464L7.443.184z"/>
                            </svg>
                            New Arrival
                        </a>
                    </li>
                </ul>
            </div>

        </div>
    </nav>


    <div th:if="${listCategories != null}">
        <p>List Categories Size: <span th:text="${#lists.size(listCategories)}"></span></p>
    </div>

    <div th:replace="navigation :: footer_menu"></div>
</div>

</body>

</html>